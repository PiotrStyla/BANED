<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BANED - Fake News Detection</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        .api-status {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            margin-bottom: 30px;
            animation: fadeIn 0.5s;
        }
        
        .api-status.online {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .api-status.offline {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            font-size: 1.1em;
        }
        
        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s;
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 150px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        .result {
            margin-top: 30px;
            padding: 30px;
            border-radius: 15px;
            animation: slideIn 0.5s;
        }
        
        .result.real {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border: 3px solid #28a745;
        }
        
        .result.fake {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            border: 3px solid #dc3545;
        }
        
        .result-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .result-icon {
            font-size: 3em;
        }
        
        .result-title {
            font-size: 2em;
            font-weight: 700;
        }
        
        .result-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .detail-item {
            background: rgba(255, 255, 255, 0.5);
            padding: 15px;
            border-radius: 10px;
        }
        
        .detail-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-size: 1.3em;
            font-weight: 700;
            color: #333;
        }
        
        .patterns {
            margin-top: 20px;
        }
        
        .pattern-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .pattern-tag {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }
        
        .pattern-tag.real {
            background: #28a745;
            color: white;
        }
        
        .pattern-tag.fake {
            background: #dc3545;
            color: white;
        }
        
        .examples {
            margin-top: 30px;
        }
        
        .examples h3 {
            color: #333;
            margin-bottom: 15px;
        }
        
        .example-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .example-btn {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }
        
        .example-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .example-title {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 8px;
        }
        
        .example-text {
            font-size: 0.9em;
            color: #666;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .confidence-bar {
            width: 100%;
            height: 25px;
            background: #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            margin-top: 8px;
        }
        
        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9em;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .card {
                padding: 25px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
        
        .footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            opacity: 0.9;
        }
        
        .footer a {
            color: white;
            text-decoration: none;
            font-weight: 600;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç BANED</h1>
            <p>Bayesian-Augmented News Evaluation & Detection</p>
            <p style="font-size: 0.9em; margin-top: 10px;">AI-Powered Fake News Detection</p>
        </div>
        
        <div class="card">
            <div id="apiStatus" class="api-status offline">
                ‚è≥ Checking API status...
            </div>
            
            <div class="form-group">
                <label for="newsText">üì∞ Enter News Text to Analyze:</label>
                <textarea 
                    id="newsText" 
                    rows="6" 
                    placeholder="Paste a news headline or article here...
Example: 'Department of Health announces new vaccination program for children'"
                ></textarea>
            </div>
            
            <div class="form-group">
                <div class="checkbox-group">
                    <input type="checkbox" id="useFusion" checked>
                    <label for="useFusion" style="margin: 0;">Use Knowledge Base Fusion (Recommended)</label>
                </div>
            </div>
            
            <div class="button-group">
                <button class="btn-primary" onclick="analyzeNews()">
                    üîç Analyze News
                </button>
                <button class="btn-secondary" onclick="clearAll()">
                    ‚úñÔ∏è Clear
                </button>
            </div>
            
            <div id="result" style="display: none;"></div>
            
            <div class="examples">
                <h3>üìã Try These Examples:</h3>
                <div class="example-buttons">
                    <div class="example-btn" onclick="loadExample(0)">
                        <div class="example-title">‚úÖ Real News (EN)</div>
                        <div class="example-text">Department announces vaccination program...</div>
                    </div>
                    <div class="example-btn" onclick="loadExample(1)">
                        <div class="example-title">‚ùå Fake News (EN)</div>
                        <div class="example-text">SHOCKING! Miracle cure doctors HATE...</div>
                    </div>
                    <div class="example-btn" onclick="loadExample(2)">
                        <div class="example-title">ü§î Clickbait (EN)</div>
                        <div class="example-text">You won't believe... number 7 will shock you!</div>
                    </div>
                    <div class="example-btn" onclick="loadExample(6)">
                        <div class="example-title">‚úÖ Prawdziwe (PL)</div>
                        <div class="example-text">Ministerstwo og≈Çasza program szczepie≈Ñ...</div>
                    </div>
                    <div class="example-btn" onclick="loadExample(7)">
                        <div class="example-title">‚ùå Fake News (PL)</div>
                        <div class="example-text">SZOKUJƒÑCE! Cudowny spos√≥b lekarze nienawidzƒÖ...</div>
                    </div>
                    <div class="example-btn" onclick="loadExample(8)">
                        <div class="example-title">ü§î Clickbait (PL)</div>
                        <div class="example-text">Nie uwierzysz... punkt 7 ciƒô zaskoczy!</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Powered by CNN + MC Dropout + Knowledge Base Fusion</p>
            <p style="margin-top: 10px;">
                <a href="https://github.com/PiotrStyla/BANED" target="_blank">View on GitHub</a> | 
                <a href="/api/docs" target="_blank">API Docs</a>
            </p>
        </div>
    </div>
    
    <script>
        // GitHub Pages + Vercel API hybrid
        const API_URL = 'https://baned-xi.vercel.app/api';
        
        const examples = [
            "Department of Health announces new vaccination program for children according to official sources",
            "SHOCKING! Scientists discover miracle cure for cancer by eating this one weird fruit that doctors HATE!",
            "You won't believe what this study reveals about coffee and your brain - number 7 will shock you!",
            "University researchers published peer-reviewed findings in medical journal about treatment effectiveness",
            "BREAKING: Government cover-up EXPOSED! They don't want you to know this secret about big pharma!",
            "According to the spokesperson, the ministry confirmed new policy implementation based on expert analysis",
            "Ministerstwo Zdrowia og≈Çasza nowy program szczepie≈Ñ dla dzieci wed≈Çug oficjalnych ≈∫r√≥de≈Ç",
            "SZOKUJƒÑCE! Naukowcy odkryli cudowny spos√≥b na raka jedzƒÖc ten jeden owoc, kt√≥rego lekarze nienawidzƒÖ!",
            "Nie uwierzysz co ujawni≈Ço to badanie o kawie - punkt 7 ciƒô zaskoczy!",
            "Badacze z uniwersytetu opublikowali recenzowane wyniki w czasopi≈õmie naukowym o skuteczno≈õci leczenia",
            "PILNE: RzƒÖdowy spisek UJAWNIONY! Nie chcƒÖ ≈ºeby≈õ wiedzia≈Ç tƒô prawdƒô o koncernach farmaceutycznych!",
            "Wed≈Çug rzecznika, ministerstwo potwierdzi≈Ço wdro≈ºenie nowej polityki na podstawie analizy ekspert√≥w"
        ];
        
        // Check API status on load
        window.addEventListener('load', checkApiStatus);
        
        async function checkApiStatus() {
            try {
                const response = await fetch(`${API_URL}/`);
                const data = await response.json();
                
                const statusDiv = document.getElementById('apiStatus');
                if (data.status === 'online' && data.model_loaded) {
                    statusDiv.className = 'api-status online';
                    statusDiv.textContent = `‚úÖ API Online - Model Loaded (v${data.version})`;
                } else {
                    statusDiv.className = 'api-status offline';
                    statusDiv.textContent = '‚ö†Ô∏è API Online but Model Not Loaded';
                }
            } catch (error) {
                const statusDiv = document.getElementById('apiStatus');
                statusDiv.className = 'api-status offline';
                statusDiv.textContent = '‚ùå API Offline - Deploy to Render first!';
            }
        }
        
        function loadExample(index) {
            document.getElementById('newsText').value = examples[index];
        }
        
        function clearAll() {
            document.getElementById('newsText').value = '';
            document.getElementById('result').style.display = 'none';
        }
        
        async function analyzeNews() {
            const text = document.getElementById('newsText').value.trim();
            
            if (!text) {
                alert('Please enter some text to analyze!');
                return;
            }
            
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<span class="loading"></span> Analyzing...';
            button.disabled = true;
            
            try {
                const useFusion = document.getElementById('useFusion').checked;
                
                const response = await fetch(`${API_URL}/predict`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        text: text,
                        use_fusion: useFusion
                    })
                });
                
                if (!response.ok) {
                    throw new Error('API request failed');
                }
                
                const data = await response.json();
                displayResult(data);
                
            } catch (error) {
                alert('Error analyzing news. Make sure the API is running!\n\nError: ' + error.message);
            } finally {
                button.innerHTML = originalText;
                button.disabled = false;
            }
        }
        
        function displayResult(data) {
            const resultDiv = document.getElementById('result');
            const isReal = data.prediction === 'REAL';
            
            let patternsHtml = '';
            if (data.kb_match) {
                const realPatterns = data.kb_match.real || [];
                const fakePatterns = data.kb_match.fake || [];
                
                if (realPatterns.length > 0 || fakePatterns.length > 0) {
                    patternsHtml = `
                        <div class="patterns">
                            <div class="detail-label">Detected Patterns:</div>
                            <div class="pattern-tags">
                                ${realPatterns.map(p => `<span class="pattern-tag real">${p}</span>`).join('')}
                                ${fakePatterns.map(p => `<span class="pattern-tag fake">${p}</span>`).join('')}
                            </div>
                        </div>
                    `;
                }
            }
            
            resultDiv.className = `result ${isReal ? 'real' : 'fake'}`;
            resultDiv.innerHTML = `
                <div class="result-header">
                    <div class="result-icon">${isReal ? '‚úÖ' : '‚ùå'}</div>
                    <div class="result-title">${data.prediction} NEWS</div>
                </div>
                
                <div class="result-details">
                    <div class="detail-item">
                        <div class="detail-label">Overall Confidence</div>
                        <div class="detail-value">${(data.confidence * 100).toFixed(1)}%</div>
                        <div class="confidence-bar">
                            <div class="confidence-fill" style="width: ${data.confidence * 100}%">
                                ${(data.confidence * 100).toFixed(0)}%
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-item">
                        <div class="detail-label">CNN Probability</div>
                        <div class="detail-value">${(data.cnn_probability * 100).toFixed(1)}%</div>
                        <div class="confidence-bar">
                            <div class="confidence-fill" style="width: ${data.cnn_probability * 100}%">
                                ${(data.cnn_probability * 100).toFixed(0)}%
                            </div>
                        </div>
                    </div>
                    
                    <div class="detail-item">
                        <div class="detail-label">Detection Method</div>
                        <div class="detail-value">${data.method.toUpperCase()}</div>
                    </div>
                </div>
                
                ${patternsHtml}
            `;
            
            resultDiv.style.display = 'block';
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    </script>
</body>
</html>
