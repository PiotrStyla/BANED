<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BANED Double Power - Neural Verified Fake News Detection</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9em;
        }

        .power-indicator {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .power {
            background: rgba(255,255,255,0.15);
            padding: 15px 25px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .power-label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .power-name {
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 5px;
        }

        .content {
            padding: 40px;
        }

        .input-section {
            margin-bottom: 30px;
        }

        label {
            display: block;
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #333;
            font-weight: 600;
        }

        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .options {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .checkbox-label input {
            margin-right: 8px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .results {
            display: none;
            margin-top: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .results.show {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .verdict {
            text-align: center;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            font-size: 1.5em;
            font-weight: bold;
        }

        .verdict.FAKE {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: white;
        }

        .verdict.REAL {
            background: linear-gradient(135deg, #51cf66, #37b24d);
            color: white;
        }

        .verdict.UNCERTAIN {
            background: linear-gradient(135deg, #ffd43b, #fab005);
            color: white;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .metric-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 8px;
        }

        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
        }

        .power-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .power-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .power-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .power-stat {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .power-stat:last-child {
            border-bottom: none;
        }

        .issues-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .issues-section h3 {
            color: #ee5a6f;
            margin-bottom: 15px;
        }

        .issue-item {
            padding: 10px;
            margin: 8px 0;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 5px;
        }

        .explanation {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .explanation h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .explanation-item {
            padding: 8px 0;
            padding-left: 20px;
            position: relative;
        }

        .explanation-item:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: #667eea;
            font-size: 1.5em;
        }

        .loading {
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .examples {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .examples h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .example-btn {
            display: inline-block;
            margin: 5px;
            padding: 10px 15px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s;
        }

        .example-btn:hover {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è BANED Double Power</h1>
            <div class="subtitle">Neural Verified Fake News Detection</div>
            <div>
                <span class="badge">üß† Neural Network</span>
                <span class="badge">‚úì Logical Verification</span>
                <span class="badge">üåç Bilingual PL/EN</span>
            </div>
            <div class="power-indicator">
                <div class="power">
                    <div class="power-label">POWER 1</div>
                    <div class="power-name">üß† CNN Pattern Recognition</div>
                </div>
                <div class="power">
                    <div class="power-label">POWER 2</div>
                    <div class="power-name">‚úì Logical Consistency + Facts</div>
                </div>
            </div>
        </div>

        <div class="content">
            <div class="input-section">
                <label for="newsText">Enter News Text to Verify:</label>
                <textarea 
                    id="newsText" 
                    rows="6" 
                    placeholder="Paste news article here... (Min 10 characters)&#10;&#10;Example: 'Scientists reveal 200% effective miracle cure that doctors hate!'"></textarea>
            </div>

            <div class="options">
                <label class="checkbox-label">
                    <input type="checkbox" id="doublePower" checked>
                    <span>Enable Double Power Verification</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="autoDetect" checked>
                    <span>Auto-detect Language</span>
                </label>
            </div>

            <button class="btn" onclick="analyzeNews()">üîç Analyze with Double Power</button>

            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Performing double power verification...</p>
            </div>

            <div id="results" class="results">
                <div id="verdictSection"></div>
                <div id="metricsSection"></div>
                <div id="powerResultsSection"></div>
                <div id="issuesSection"></div>
                <div id="explanationSection"></div>
            </div>

            <div class="examples">
                <h3>üìù Quick Test Examples:</h3>
                <button class="example-btn" onclick="useExample(0)">üî¥ Obvious Fake (English)</button>
                <button class="example-btn" onclick="useExample(1)">üü¢ Real News (English)</button>
                <button class="example-btn" onclick="useExample(2)">üî¥ Fake (Polish)</button>
                <button class="example-btn" onclick="useExample(3)">üü° Suspicious Claims</button>
                <button class="example-btn" onclick="useExample(4)">üî¥ Impossible Statistics</button>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:8000';
        
        const examples = [
            "Scientists reveal 200% effective miracle cure that doctors hate! Big pharma doesn't want you to know this shocking truth!",
            "Government announces new environmental protection research program conducted by university scientists.",
            "Nie uwierzysz! Eksperci ujawniajƒÖ zaskakujƒÖcƒÖ prawdƒô o szczepionkach. Media g≈Ç√≥wnego nurtu tego nie poka≈ºƒÖ!",
            "COVID-19 pandemic started in 2015 according to mainstream media. Always trust the experts, they never make mistakes!",
            "New study shows 150% improvement in all patients with exactly 0% risk of side effects. Works 100% of the time!"
        ];

        function useExample(index) {
            document.getElementById('newsText').value = examples[index];
        }

        async function analyzeNews() {
            const text = document.getElementById('newsText').value.trim();
            const doublePower = document.getElementById('doublePower').checked;

            if (text.length < 10) {
                alert('Please enter at least 10 characters.');
                return;
            }

            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').classList.remove('show');

            try {
                const response = await fetch(`${API_URL}/predict`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        text: text,
                        use_double_power: doublePower
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                displayResults(data);
            } catch (error) {
                console.error('Error:', error);
                alert('Error connecting to API. Make sure the server is running on port 8000.\n\nRun: python api_double_power.py');
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }

        function displayResults(data) {
            // Verdict
            const verdictHtml = `
                <div class="verdict ${data.prediction}">
                    ${data.prediction === 'FAKE' ? 'üö®' : data.prediction === 'REAL' ? '‚úÖ' : '‚ö†Ô∏è'} 
                    ${data.prediction}
                    <div style="font-size: 0.6em; margin-top: 10px; opacity: 0.9;">
                        Method: ${data.method}
                    </div>
                </div>
            `;
            document.getElementById('verdictSection').innerHTML = verdictHtml;

            // Metrics
            const metricsHtml = `
                <div class="metrics">
                    <div class="metric-card">
                        <div class="metric-label">Confidence</div>
                        <div class="metric-value">${(data.confidence * 100).toFixed(1)}%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Fake Probability</div>
                        <div class="metric-value">${(data.fake_probability * 100).toFixed(1)}%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Language</div>
                        <div class="metric-value">${data.language.toUpperCase()}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Verification Score</div>
                        <div class="metric-value">${data.verification?.verification_score || 'N/A'}</div>
                    </div>
                </div>
            `;
            document.getElementById('metricsSection').innerHTML = metricsHtml;

            // Power Results
            let powerHtml = '<div class="power-results">';
            
            // CNN Power
            if (data.cnn_score) {
                powerHtml += `
                    <div class="power-card">
                        <h3>üß† Power 1: CNN Neural Network</h3>
                        <div class="power-stat">
                            <span>Prediction:</span>
                            <strong>${data.cnn_score.prediction}</strong>
                        </div>
                        <div class="power-stat">
                            <span>Probability:</span>
                            <strong>${(data.cnn_score.probability * 100).toFixed(1)}%</strong>
                        </div>
                        <div class="power-stat">
                            <span>Confidence:</span>
                            <strong>${(data.cnn_score.confidence * 100).toFixed(1)}%</strong>
                        </div>
                        <div class="power-stat">
                            <span>Uncertainty:</span>
                            <strong>${(data.cnn_score.uncertainty * 100).toFixed(2)}%</strong>
                        </div>
                    </div>
                `;
            }

            // Verification Power
            if (data.verification) {
                const v = data.verification;
                powerHtml += `
                    <div class="power-card">
                        <h3>‚úì Power 2: Logical Verification</h3>
                        <div class="power-stat">
                            <span>Verdict:</span>
                            <strong>${v.verdict}</strong>
                        </div>
                        <div class="power-stat">
                            <span>Verification Score:</span>
                            <strong>${v.verification_score}</strong>
                        </div>
                        <div class="power-stat">
                            <span>Consistency:</span>
                            <strong>${v.power_1_consistency.consistency_level}</strong>
                        </div>
                        <div class="power-stat">
                            <span>Fact Check:</span>
                            <strong>${v.power_2_fact_check.verification_level}</strong>
                        </div>
                    </div>
                `;
            }
            
            powerHtml += '</div>';
            document.getElementById('powerResultsSection').innerHTML = powerHtml;

            // Issues
            if (data.verification && data.verification.all_issues.length > 0) {
                let issuesHtml = '<div class="issues-section"><h3>‚ö†Ô∏è Issues Detected</h3>';
                data.verification.all_issues.forEach(issue => {
                    issuesHtml += `<div class="issue-item">${issue}</div>`;
                });
                issuesHtml += '</div>';
                document.getElementById('issuesSection').innerHTML = issuesHtml;
            } else {
                document.getElementById('issuesSection').innerHTML = '';
            }

            // Explanation
            if (data.explanation && data.explanation.length > 0) {
                let explanationHtml = '<div class="explanation"><h3>üí° Analysis Explanation</h3>';
                data.explanation.forEach(exp => {
                    explanationHtml += `<div class="explanation-item">${exp}</div>`;
                });
                explanationHtml += '</div>';
                document.getElementById('explanationSection').innerHTML = explanationHtml;
            }

            // Show results
            document.getElementById('results').classList.add('show');
        }

        // Check API status on load
        window.addEventListener('load', async () => {
            try {
                const response = await fetch(`${API_URL}/`);
                if (response.ok) {
                    console.log('‚úÖ API is online');
                }
            } catch (error) {
                console.warn('‚ö†Ô∏è API not available. Please start the server: python api_double_power.py');
            }
        });
    </script>
</body>
</html>
